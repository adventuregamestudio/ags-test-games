// Misc Helper utilities

GameTimer GT;
export GT;

function repeatedly_execute_always()
{
  GT.GameTicks++;
  if (GT.GameTicks < 0)
    GT.GameTicks = 0;
}

function on_event(EventType evt, int data1)
{
  // This is not certain, but there's 1 game update somewhere between
  // leaving one room and entering another, when repeatedly_execute_always
  // is not getting called, which means that our timer variable in script
  // becomes 1 tick behind the game's loop counter.
  // Try to adjust it in "room leave" event.
  if (evt == eEventLeaveRoom)
  {
    GT.GameTicks++;
  }
}
